<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>multistream.codec documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Multistream</span> <span class="project-version">0.7.1</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>multistream</span></div></div></li><li class="depth-2 current"><a href="multistream.codec.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>codec</span></div></a></li><li class="depth-3 branch"><a href="multistream.codec.bin.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bin</span></div></a></li><li class="depth-3 branch"><a href="multistream.codec.compress.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>compress</span></div></a></li><li class="depth-3 branch"><a href="multistream.codec.text.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>text</span></div></a></li><li class="depth-3"><a href="multistream.codec.transform.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>transform</span></div></a></li><li class="depth-2"><a href="multistream.header.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>header</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="multistream.codec.html#var-*eof-guard*"><div class="inner"><span>*eof-guard*</span></div></a></li><li class="depth-1"><a href="multistream.codec.html#var-Codec"><div class="inner"><span>Codec</span></div></a></li><li class="depth-2 branch"><a href="multistream.codec.html#var-decode-byte-stream"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>decode-byte-stream</span></div></a></li><li class="depth-2 branch"><a href="multistream.codec.html#var-decode-value-stream"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>decode-value-stream</span></div></a></li><li class="depth-2 branch"><a href="multistream.codec.html#var-encode-byte-stream"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>encode-byte-stream</span></div></a></li><li class="depth-2 branch"><a href="multistream.codec.html#var-encode-value-stream"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>encode-value-stream</span></div></a></li><li class="depth-2 branch"><a href="multistream.codec.html#var-processable.3F"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>processable?</span></div></a></li><li class="depth-2"><a href="multistream.codec.html#var-select-header"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>select-header</span></div></a></li><li class="depth-1"><a href="multistream.codec.html#var-CodecFactory"><div class="inner"><span>CodecFactory</span></div></a></li><li class="depth-2 branch"><a href="multistream.codec.html#var-decoder-stream"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>decoder-stream</span></div></a></li><li class="depth-2"><a href="multistream.codec.html#var-encoder-stream"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>encoder-stream</span></div></a></li><li class="depth-1"><a href="multistream.codec.html#var-decode"><div class="inner"><span>decode</span></div></a></li><li class="depth-1"><a href="multistream.codec.html#var-DecoderStream"><div class="inner"><span>DecoderStream</span></div></a></li><li class="depth-2"><a href="multistream.codec.html#var-read.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>read!</span></div></a></li><li class="depth-1"><a href="multistream.codec.html#var-defcodec"><div class="inner"><span>defcodec</span></div></a></li><li class="depth-1"><a href="multistream.codec.html#var-defdecoder"><div class="inner"><span>defdecoder</span></div></a></li><li class="depth-1"><a href="multistream.codec.html#var-defencoder"><div class="inner"><span>defencoder</span></div></a></li><li class="depth-1"><a href="multistream.codec.html#var-encode"><div class="inner"><span>encode</span></div></a></li><li class="depth-1"><a href="multistream.codec.html#var-EncoderStream"><div class="inner"><span>EncoderStream</span></div></a></li><li class="depth-2"><a href="multistream.codec.html#var-write.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>write!</span></div></a></li><li class="depth-1"><a href="multistream.codec.html#var-headers"><div class="inner"><span>headers</span></div></a></li><li class="depth-1"><a href="multistream.codec.html#var-multi"><div class="inner"><span>multi</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">multistream.codec</h1><div class="doc"><div class="markdown"><p>Core multistream codec protocols and functions.</p></div></div><div class="public anchor" id="var-*eof-guard*"><h3>*eof-guard*</h3><h4 class="dynamic">dynamic</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>When bound, decoder streams will return this instead of throwing an exception when the end of the input stream is reached.</p></div></div><div class="src-link"><a href="https://github.com/multiformats/clj-multistream/blob/master/src/multistream/codec.clj#L47">view source</a></div></div><div class="public anchor" id="var-Codec"><h3>Codec</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>A codec provides a central place for collecting options and producing new stream instances.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-decode-byte-stream"><h3>decode-byte-stream</h3><div class="usage"><code>(decode-byte-stream codec header input-stream)</code></div><div class="doc"><div class="markdown"><p>Apply decoding to the given stream of bytes. The stream should be a <code>java.io.InputStream</code> instance.</p>
<p>This method should return either another <code>InputStream</code> or a <code>DecoderStream</code>.</p></div></div></div><div class="public anchor" id="var-decode-value-stream"><h3>decode-value-stream</h3><div class="usage"><code>(decode-value-stream codec header decoder-stream)</code></div><div class="doc"><div class="markdown"><p>Wrap decoding logic around the values produced by the given decoder stream.</p></div></div></div><div class="public anchor" id="var-encode-byte-stream"><h3>encode-byte-stream</h3><div class="usage"><code>(encode-byte-stream codec selector output-stream)</code></div><div class="doc"><div class="markdown"><p>Apply encoding to the given stream of bytes. The stream should be a <code>java.io.OutputStream</code> instance.</p>
<p>This method should return either another <code>OutputStream</code> or an <code>EncoderStream</code>.</p></div></div></div><div class="public anchor" id="var-encode-value-stream"><h3>encode-value-stream</h3><div class="usage"><code>(encode-value-stream codec selector encoder-stream)</code></div><div class="doc"><div class="markdown"><p>Wrap encoding logic around the values produced by the given encoder stream.</p></div></div></div><div class="public anchor" id="var-processable.3F"><h3>processable?</h3><div class="usage"><code>(processable? codec header)</code></div><div class="doc"><div class="markdown"><p>True if this codec can process the given header.</p></div></div></div><div class="public anchor" id="var-select-header"><h3>select-header</h3><div class="usage"><code>(select-header codec selector)</code></div><div class="doc"><div class="markdown"><p>Generate the header string to use for this codec. This defaults to the codecâ€™s <code>:header</code> field.</p></div></div></div></div></div><div class="src-link"><a href="https://github.com/multiformats/clj-multistream/blob/master/src/multistream/codec.clj#L83">view source</a></div></div><div class="public anchor" id="var-CodecFactory"><h3>CodecFactory</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>A codec factory supports the creation of encoder and decoder streams by composing codecs together.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-decoder-stream"><h3>decoder-stream</h3><div class="usage"><code>(decoder-stream factory input)</code></div><div class="doc"><div class="markdown"><p>Open a new decoding stream to read values from the given byte input. This reads headers from the stream to select codecs.</p></div></div></div><div class="public anchor" id="var-encoder-stream"><h3>encoder-stream</h3><div class="usage"><code>(encoder-stream factory selectors output)</code></div><div class="doc"><div class="markdown"><p>Open a new encoder stream to write values to the given byte output.</p>
<p>The <code>selectors</code> argument may be a vector of either codec keys or headers processable by one of the codecs in the factory.</p></div></div></div></div></div><div class="src-link"><a href="https://github.com/multiformats/clj-multistream/blob/master/src/multistream/codec.clj#L121">view source</a></div></div><div class="public anchor" id="var-decode"><h3>decode</h3><div class="usage"><code>(decode codec-or-factory input)</code></div><div class="doc"><div class="markdown"><p>Decodes the given byte array using either a direct codec or a multicodec factory.</p></div></div><div class="src-link"><a href="https://github.com/multiformats/clj-multistream/blob/master/src/multistream/codec.clj#L287">view source</a></div></div><div class="public anchor" id="var-DecoderStream"><h3>DecoderStream</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>A stream which can be used to decode values from some underlying byte input stream.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-read.21"><h3>read!</h3><div class="usage"><code>(read! stream)</code></div><div class="doc"><div class="markdown"><p>Read the next value from the underlying byte stream. Returns the decoded value, or throws an exception on error.</p>
<p>If the end of the stream has been reached, this method should return the value of <code>*eof-guard*</code> if it is bound, or throw an ex-info with <code>:type
:multistream.codec/eof</code>.</p></div></div></div></div></div><div class="src-link"><a href="https://github.com/multiformats/clj-multistream/blob/master/src/multistream/codec.clj#L69">view source</a></div></div><div class="public anchor" id="var-defcodec"><h3>defcodec</h3><h4 class="type">macro</h4><div class="usage"><code>(defcodec name-sym attr-vec &amp; more)</code></div><div class="doc"><div class="markdown"><p>Define a new codec, filling in the protocol with default method implementations.</p>
<p>The autogenerated constructors will be private.</p></div></div><div class="src-link"><a href="https://github.com/multiformats/clj-multistream/blob/master/src/multistream/codec.clj#L413">view source</a></div></div><div class="public anchor" id="var-defdecoder"><h3>defdecoder</h3><h4 class="type">macro</h4><div class="usage"><code>(defdecoder name-sym attr-vec read-form &amp; more)</code></div><div class="doc"><div class="markdown"><p>Define a new decoder stream record, filling in the protocol, <code>Closeable</code>, and <code>IReduceInit</code> implementations. The first record attribute must be the wrapped stream.</p>
<p>The autogenerated constructors will be private.</p></div></div><div class="src-link"><a href="https://github.com/multiformats/clj-multistream/blob/master/src/multistream/codec.clj#L374">view source</a></div></div><div class="public anchor" id="var-defencoder"><h3>defencoder</h3><h4 class="type">macro</h4><div class="usage"><code>(defencoder name-sym attr-vec write-form &amp; more)</code></div><div class="doc"><div class="markdown"><p>Define a new encoder stream record, filling in the protocol and <code>Closeable</code> implementation. The first record attribute must be the wrapped stream.</p>
<p>The autogenerated constructors will be private.</p></div></div><div class="src-link"><a href="https://github.com/multiformats/clj-multistream/blob/master/src/multistream/codec.clj#L342">view source</a></div></div><div class="public anchor" id="var-encode"><h3>encode</h3><div class="usage"><code>(encode codec value)</code><code>(encode factory selectors value)</code></div><div class="doc"><div class="markdown"><p>Encodes the given value using either a direct codec or a multicodec factory and the given selectors. Returns a byte array containing the encoded value, or throws an exception on error.</p></div></div><div class="src-link"><a href="https://github.com/multiformats/clj-multistream/blob/master/src/multistream/codec.clj#L274">view source</a></div></div><div class="public anchor" id="var-EncoderStream"><h3>EncoderStream</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><div class="markdown"><p>A stream which can be used to encode values to some underlying byte output stream.</p></div></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-write.21"><h3>write!</h3><div class="usage"><code>(write! stream value)</code></div><div class="doc"><div class="markdown"><p>Write the value as a sequence of bytes to the stream. Returns the number of bytes the value was encoded to, though this may be different than the final bytes written.</p>
<p>This method should throw an exception if the value cannot be written.</p></div></div></div></div></div><div class="src-link"><a href="https://github.com/multiformats/clj-multistream/blob/master/src/multistream/codec.clj#L56">view source</a></div></div><div class="public anchor" id="var-headers"><h3>headers</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Map of codec keywords to header paths, drawn from the multicodec standards document.</p></div></div><div class="src-link"><a href="https://github.com/multiformats/clj-multistream/blob/master/src/multistream/codec.clj#L13">view source</a></div></div><div class="public anchor" id="var-multi"><h3>multi</h3><div class="usage"><code>(multi &amp; {:as codecs})</code></div><div class="doc"><div class="markdown"><p>Construct a new multiplexing codec factory.</p>
<p>The arguments to this function should be key/codec pairs to register with the factory.</p></div></div><div class="src-link"><a href="https://github.com/multiformats/clj-multistream/blob/master/src/multistream/codec.clj#L262">view source</a></div></div></div></body></html>